## 🌿 프로젝트 개요

![Ticat Logo](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/ticat+logo.png)

> 다양한 축제 정보를 효과적으로 제공하여 사용자가 쉽고 빠르게 흥미로운 축제를 찾아 새로운 경험을 할 수 있도록 도와주는 웹 사이트입니다.

- **`팀 명`**: Butlers
- **`진행 기간`**: 2023.07. ~ 2023.12.
- **`팀 구성`**: 백엔드 3명, 프론트엔드 4명
- **`깃허브 링크`**: https://github.com/Butlers-Team/ticat-client

## 🛠️ 기술 스택

- Typescript
- React
- Styled Components
- React Query
- Zustand

## 🙋🏻‍♀️ 내가 기여한 부분

- 축제 리스트 페이지
- 지역 설정 페이지
- 현재 위치에서 해당하는 축제 조회하고 스탬프 찍기
- 스탬프 리스트 및 캘린더 페이지
- **마이페이지** - 최근목록 및 프로필 수정

### 1. 축제 리스트

![축제 리스트 페이지](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/festival+list+page.gif)

- 다양한 축제들을 카테고리 별로 분리해서 확인할 수 있으며 사용자의 편리성을 위해 카테고리를 화살표로 좌우 자재로 이동하거나 슬라이스로 조정할 수 있습니다.
- 다른 페이지를 전환하거나 앱을 잠깐 나가 있어도 카테고리를 세션 스토리지에 저장하여 앱을 종료하기 전에는 현재 보고 있는 카테고리를 저장하여 사용자 편리성을 증가시켰습니다.
- 축제는 전체 데이터를 로딩하지 않고, 부분적인 콘텐츠를 로딩할 수 있도록 React Query에서 제공하는 **`useInfiniteQuery`** 훅을 활용하여 무한 스크롤 기능을 구현하였습니다.

### 2. 지역 설정

![지역 설정 페이지](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/area+select+page.gif)

- 카테고리 이외에도 찾고 싶은 지역을 최대 5개까지 선택할 수 있습니다.
- 선택한 지역을 태그 형식으로 한눈에 확인할 수 있고, 태그 옆에 **x** 버튼을 활용하여 지역을 취소하거나 **지역 초기화** 버튼으로 전체 지역을 취소할 수 있습니다.
- 예를 들어, 서울에서 여러 개의 구를 선택하였지만 서울의 전체를 확인하고 싶어 전체를 선택한 경우 서울에서 선택한 지역은 초기화되고 전체로 변경될 수 있도록 구현하였습니다.

### 3. 현재 위치에서 해당하는 축제 조회하고 스탬프 찍기

![스탬프 찍기](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/stamping.gif)

- 기본적인 기능에 더불어 색다른 재미를 부여하기 위해 **스탬프 기능**을 추가하였습니다.
- 사용자가 축제에 방문할 때 스탬프 찍기를 클릭하여, 해당하는 축제와 사용자 위치가 근접한 지 확인하여 스탬프를 찍을 수 있습니다.
- 사용자 현재 위치가 축제 위치 300미터 내 일 경우에 해당하는 축제의 정보가 보이고, 위치가 멀다면 축제를 찍을 수 없다는 안내 화면을 보여줍니다.
- 스탬프를 찍은 후에는 스탬프 리스트 페이지로 다이렉트 시켜주었습니다.

### 4. 스탬프 리스트 및 캘린더 페이지

![스탬프 리스트](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/stamp+list.png)

- 방문한 축제를 한눈에 확인할 수 있도록 **리스트**와 **캘린더** 형식 둘 다 구현하였습니다.
- 현재 날짜를 기점으로 다음 달로 넘어갈 수 있는 버튼은 **`disabled`** 하였고, 가운데 날짜를 클릭하면 현재 날짜로 이동할 수 있습니다.

### 5. 마이페이지 - 최근 목록 및 프로필 수정

![마이 페이지](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/my+page.png)

- 최근 목록은 축제 상세 페이지를 방문하였을 때 저장되며, 최대 5개까지 보관이 됩니다.
- 프로필 업데이트 페이지에서는 이미지 수정/삭제, 닉네임(중복 x), 관심사 수정이 가능합니다.

## ⚡️ 트러블 슈팅

### 모바일 환경에서 스크롤 시 주소표시줄 사라지는 이슈

**[문제 상황]**

모바일 환경(특히 카카오톡과 같은 인앱 브라우저)에서, 스크롤 시 주소 표시줄이 나타나거나 사라질 때 발생하는 뷰포트 높이의 변화를 정확히 반영하지 못하는 문제가 있었습니다. 이로 인해 일부 UI 요소가 제대로 표시되지 않는 등의 레이아웃 문제가 발생했습니다.

![스크롤 이슈 발생](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/scroll+issue+before.gif)

초기의 코드에는 **`resize`** 이벤트 리스너를 사용하여 브라우저 창의 크기가 변경될 때마다 `--vh` CSS 변수를 업데이트하는 방식을 사용했습니다. 이 방식은 실제 창의 크기가 변경될 때만 이벤트가 발생하기 때문에, 사용자가 창 크기를 직접 조정하는 경우에는 잘 작동했습니다.

하지만, 모바일 환경에서는 사용자가 페이지를 스크롤할 때 주소 표시줄의 나타남과 사라짐이 뷰포트 높이의 변경을 일으키며, 이러한 변경이 **`resize`** 이벤트로 적절히 감지되지 않았습니다. 이는 **`resize`** 이벤트가 주소 표시줄의 변화에 따른 뷰포트 높이의 미세한 조정을 정확히 반영하지 못하기 때문에 발생했습니다.

**[문제 해결 과정]**

이 문제를 해결하기 위해, 화면 높이가 변경되었을 때만 ref 객체에 `--vh` 값을 업데이트하는 방식으로 변경했습니다. 또한, 지속적인 업데이트를 확인할 수 있도록 150ms 마다 지속적으로 업데이트를 해주었습니다.

![스크롤 이슈 해결 완료](https://sieun-portfolio.s3.ap-northeast-2.amazonaws.com/ticat/scroll+issue+after.gif)

이 방법을 통해, 주소 표시줄의 나타남과 사라짐에 따른 뷰포트 높이의 변화를 보다 정확하고 신속하게 반영할 수 있었으며, UI 레이아웃 문제를 성공적으로 해결할 수 있었습니다.

**해결한 코드**

```jsx
const previousVH = useRef < number > 0;

useEffect(() => {
  const updateHeight = () => {
    const vh = window.innerHeight * 0.01;
    if (vh !== previousVH.current) {
      document.documentElement.style.setProperty('--vh', `${vh}px`);
      previousVH.current = vh;
    }
  };

  // 초기 로드 시 설정
  updateHeight();

  const intervalId = setInterval(updateHeight, 150);

  return () => {
    clearInterval(intervalId);
  };
}, []);
```

**[얻은 교훈]**

하나의 브라우저나 디바이스에서 테스트를 진행하는 것만으로는 모든 사용자 환경에서 발생할 수 있는 문제를 충분히 파악하기 어렵다는 것을 깨달았습니다. 이번 경험을 통해, 애플리케이션의 호환성과 사용성을 보장하기 위해서는 다양한 디바이스 환경과 여러 브라우저에서의 광범위한 테스트가 필수적임을 명확히 이해하게 되었습니다.
